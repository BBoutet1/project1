<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Knewave&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/styles/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <link rel="stylesheet" href="./assets/styles/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>ReciPlease</title>

</head>
<body>  
    <div class="section canvas">
  
        <!-- Navbar -->
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
              <span class="navbar-item">
                <img class="logo" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRdqwgxRpqnv1eAH0Pd8WHXeorMo5KteYrabv62YkKHkru5fIMs" alt="Reciplease">
                <p class="brand">ReciPlease</p>
              </span>
          
              <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
              </a>
            </div>
          </nav>

          <!-- Search Form -->

            <div class="card search-card">
                
                <div class="card-content">
                        <h1>Find a Recipe
                    
                        <div class="field">
                            <p class="control has-icons-left is-small is-info is-loading">
                            <input class="input is-small" type="text" placeholder="e.g. Butter Chicken">
                            <span class="icon is-small is-left">
                                <i class="fas fa-envelope"></i>
                            </span>
                            </p>
                        </div>

                        <button class="button is-primary is-small modal-button show-modal-button" data-target="modal-ter" data-type="cuisines" aria-haspopup="true">Cuisines</button>
                        <button class="button is-primary is-small modal-button show-modal-button" data-target="modal-ter" data-type="diets" aria-haspopup="true">Diets</button>
                        <button class="button is-primary is-small modal-button show-modal-button" data-target="modal-ter" data-type="intolerances" aria-haspopup="true">Intolerances</button>
                        
                        <button class="button is-small is-right">Search</button>


            </div>

    </div> 
    <div class="modal">

        <div class="modal-background"></div>
        <div class="modal-card">
          <header class="modal-card-head">
            <p class="modal-card-title">Modal title</p>
            <button class="delete" aria-label="close"></button>
          </header>
          <section class="modal-card-body">
            <!-- Content ... -->
          </section>
        </div>
      </div>
    
    <script>
        $(document).ready(function(){        });

        var cuisines = {"African":false,
                        "American":false,
                        "British":false,
                        "Cajun":false,
                        "Caribbean":false,
                        "Chinese":false,
                        "Eastern European":false,
                        "European":false,
                        "French":false,
                        "German":false,
                        "Greek":false,
                        "Indian":false,
                        "Irish":false,
                        "Italian":false,
                        "Japanese":false,
                        "Jewish":false,
                        "Korean":false,
                        "Latin American":false,
                        "Mediterranean":false,
                        "Mexican":false,
                        "Middle Eastern":false,
                        "Nordic":false,
                        "Southern":false,
                        "Spanish":false,
                        "Thai":false,
                        "Vietnamese":false};

        var diets = {"Gluten Free":false,
                    "Ketogenic":false,
                    "Vegetarian":false,
                    "Lacto-Vegetarian":false,
                    "Ovo-Vegetarian":false,
                    "Vegan":false,
                    "Pescetarian":false,
                    "Paleo":false,
                    "Primal":false,
                    "Whole30":false};


        var intolerances ={"Gluten Free":false,
                            "Ketogenic":false,
                            "Vegetarian":false,
                            "Lacto-Vegetarian":false,
                            "Ovo-Vegetarian":false,
                            "Vegan":false,
                            "Pescetarian":false,
                            "Paleo":false,
                            "Primal":false,
                            "Whole30":false};

        // Show Modal
        $(".show-modal-button").click(function() {

            var filterType = this.getAttribute("data-type");

            populateModal(filterType);

            $(".modal").attr("class","is-active");
        })

        function populateModal(filterType)
        {
            switch(filterType)
            {
                case "diets":
                    DrawFilterCheckbox(diets);
                    break;
                case "cuisines":
                    DrawFilterCheckbox(cuisines);
                    break;
                case "intolerances":
                    DrawFilterCheckbox(intolerances);
                    break;
            }
        }

        function DrawFilterCheckbox(dict)
        {
            var modalBody = $(".modal-card-body");

            modalBody.click(function() { 
                
                var target = event.target;
                
                dict[target.getAttribute("data-type")] = target.checked;

                console.log(target.checked);
            });

            modalBody.empty();

            Object.entries(dict).forEach(([key,value]) => {

                var input = $("<input>").attr("type","checkbox").attr("data-value",key);

                input.checked = value;
                
                var label = $("<label>").attr("class","filter-label").text(key);

                label.prepend(input);

                modalBody.append(label);

            });

        }

    </script>
</body>
</html>